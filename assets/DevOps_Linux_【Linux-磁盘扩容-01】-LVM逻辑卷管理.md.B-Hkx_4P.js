import{_ as s,c as i,o as a,a1 as n}from"./chunks/framework.CG9TfmPt.js";const y=JSON.parse('{"title":"LVM逻辑卷管理","description":"","frontmatter":{},"headers":[],"relativePath":"DevOps/Linux/【Linux-磁盘扩容-01】-LVM逻辑卷管理.md","filePath":"DevOps/Linux/【Linux-磁盘扩容-01】-LVM逻辑卷管理.md"}'),l={name:"DevOps/Linux/【Linux-磁盘扩容-01】-LVM逻辑卷管理.md"},h=n(`<h1 id="lvm逻辑卷管理" tabindex="-1">LVM逻辑卷管理 <a class="header-anchor" href="#lvm逻辑卷管理" aria-label="Permalink to &quot;LVM逻辑卷管理&quot;">​</a></h1><h2 id="一、lvm定义" tabindex="-1">一、LVM定义 <a class="header-anchor" href="#一、lvm定义" aria-label="Permalink to &quot;一、LVM定义&quot;">​</a></h2><blockquote><ul><li>LVM（Logical Volume Manager），即逻辑卷管理，它是Linux环境下对磁盘分区进行管理的一种机制。 <ul><li>一般来说物理磁盘或分区之间是分割的，数据无法跨盘或分区，而各磁盘或分区大小固定，重新调整比较麻烦</li><li>LVM可以将底层的物理磁盘或分区整合起来抽象成容量资源池，以划分成逻辑卷的方式供上层使用</li><li>可以在无需关机无需重新格式化（原来的部分无需格式化，只格式化新增的部分）的情况下弹性调整逻辑卷大小</li></ul></li></ul></blockquote><h2 id="二、关键概念" tabindex="-1">二、关键概念 <a class="header-anchor" href="#二、关键概念" aria-label="Permalink to &quot;二、关键概念&quot;">​</a></h2><blockquote><ul><li>PV（physical volume） <ul><li>物理卷在逻辑卷管理的最底层，可为整个物理硬盘或实际物理硬盘上的分区</li></ul></li><li>VG（volume group） <ul><li>卷组建立在物理卷上，卷组至少要包含一物理卷，卷组建立后可动态的添加卷到卷组，一个逻辑卷管理系统中可有多个卷组</li></ul></li><li>LV（logical volume） <ul><li>逻辑卷建立在卷组上，卷组中未分配的空间可用于建立新的逻辑卷，逻辑卷建立后可动态扩展或缩小空间</li></ul></li></ul></blockquote><h2 id="三、创建过程" tabindex="-1">三、创建过程 <a class="header-anchor" href="#三、创建过程" aria-label="Permalink to &quot;三、创建过程&quot;">​</a></h2><h3 id="_1、磁盘分区" tabindex="-1">1、磁盘分区 <a class="header-anchor" href="#_1、磁盘分区" aria-label="Permalink to &quot;1、磁盘分区&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 将各物理磁盘或分区的系统类型设为Linux LVM，其system ID为8e，通过fdisk工具中的t命令设置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fdisk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sdb</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">n,p,3,t,8e,p,wq</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#注意：硬盘分区分为MBR（传统的分区记录方法，最多支持4个主分区，这个限制可以通过创建扩展分区来绕过即3个主分区+1个扩展分区，扩展分区中又可以包含多个逻辑分区但是逻辑分区不能用作引导卷，容量限制为2TB）；GPT（可以创建多大128个分区无需借助逻辑分区）</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#备注：lvm卷组只做增加扩容，不做减少容易出问题</span></span></code></pre></div><h3 id="_2、创建pv" tabindex="-1">2、创建PV <a class="header-anchor" href="#_2、创建pv" aria-label="Permalink to &quot;2、创建PV&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 将物理磁盘或分初始化为PV物理卷</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pvcreate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sdb1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --创建物理卷</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pvscan</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --扫描当前系统上的所有物理卷</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pvdisplay</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --显示物理卷的属性</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pvremove</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sdb1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --删除物理卷</span></span></code></pre></div><h3 id="_3、创建vg" tabindex="-1">3、创建VG <a class="header-anchor" href="#_3、创建vg" aria-label="Permalink to &quot;3、创建VG&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 创建VG卷组</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vgcreate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [option] myvg(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">VG_NAME</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) /dev/sdb1(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PV_DEVICE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-s:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 卷组中物理卷的PE大小，默认为4M</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l：卷组上允许创建的最大逻辑卷数</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p：卷组中允许添加的最大物理卷数</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vgscan</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --查找系统中存在的vg卷组</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vgdisplay</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --显示卷组属性</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vgextend</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> VG_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PV_DEVICE</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --动态扩展LVM卷组，它通过向卷组中添加物理卷来增加卷组的容量</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vgreduce</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> VG_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PV_DEVICE</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --通过删除LVM卷组中的物理卷来减少卷组容量，不能删除卷组中剩余的最后一个物理卷</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vgremove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [-f </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">强制删除]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> VG_NAME</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --删除卷组，其上的逻辑卷必须处于离线状态</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vgchange</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> n/y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> VG_NAME</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --常用来设置卷组的活动状态</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> n为休眠状态</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> y为活动状态</span></span></code></pre></div><h3 id="_4、创建lv" tabindex="-1">4、创建LV <a class="header-anchor" href="#_4、创建lv" aria-label="Permalink to &quot;4、创建LV&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 在卷组上创建LV（logical volume，逻辑卷）逻辑卷对应的设备文件保存在卷组目录下，为/dev/VG_NAME/LV_NAME</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lvcreate</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vol_projects</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -L</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 10G</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vg00（在卷组vg00之上创建10G大小的逻辑卷vol_projects）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lvcreate</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vol_backups</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 100%FREE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vg00</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 用于为LV指定名称，-L</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 设定固定大小，-l在VG的预留空间中指定百分比大小空间</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lvscan</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --扫描当前系统中的所有逻辑卷及其对应的设备文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lvdisplay</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --显示逻辑卷属性</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lvextend</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --在线扩展逻辑卷空间</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-L指定扩展后的大小</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -L</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +800M</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 表示扩大800M，而-L</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 800M表示扩大至800M</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lvextend</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -L</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 200M</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/VG_NAME/LV_NAME</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-l指定扩展后的大小（LE数）lvextend</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +100%FREE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/mapper/cl-home</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lvreduce</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --缩减逻辑卷空间，一般离线使用</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lvreduce</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -L/l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 缩减的大小</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/VG_NAME/LV_NAME</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lvremove</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --删除逻辑卷，需要处于离线卸载状态</span></span></code></pre></div><h3 id="_5、挂载" tabindex="-1">5、挂载 <a class="header-anchor" href="#_5、挂载" aria-label="Permalink to &quot;5、挂载&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 格式化逻辑卷并挂载</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mke2fs</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ext4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/myvg/mylv</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /data</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mount</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/myvg/mylv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /data</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/inittab</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /data</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ls</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /data</span></span></code></pre></div><h3 id="_6、示例-新加挂载" tabindex="-1">6、示例-新加挂载 <a class="header-anchor" href="#_6、示例-新加挂载" aria-label="Permalink to &quot;6、示例-新加挂载&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#!/bin/bash</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fdisk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sda</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">n</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">p</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">p</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">wq</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">partprobe</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sda</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pvcreate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sda3</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vgcreate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myvg</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sda3</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lvcreate</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 100%FREE</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mylv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myvg</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lvs</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /data</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkfs.xfs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/myvg/mylv</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mount</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/myvg/mylv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /data</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">df</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -Th</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;$a /dev/myvg/mylv  /data  xfs  defaults 0 0&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/fstab</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/fstab</span></span></code></pre></div><h3 id="_7、示例-原有扩容" tabindex="-1">7、示例-原有扩容 <a class="header-anchor" href="#_7、示例-原有扩容" aria-label="Permalink to &quot;7、示例-原有扩容&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#!/bin/bash</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fdisk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sdb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">n</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">p</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">t</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">8e</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">p</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">wq</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">partprobe</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sdb</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --请求操作系统重新加载分区信息，不重启前提下，将分区表重新读取并加载到内核中</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pvcreate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sdb1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vgextend</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> centos</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sdb1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lvextend</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +100%FREE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/centos/root</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --/dev/VG_NAME/LV_NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 逻辑卷对应的设备文件保存在卷组目录</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">xfs_growfs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/centos/root</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lvs</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">一个VG可以支持多个lvm卷，可以从VG剩余空间扩充到不同的lv上，如：/dev/centos/root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 或</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/centos/swap</span></span></code></pre></div><h2 id="四、其他" tabindex="-1">四、其他 <a class="header-anchor" href="#四、其他" aria-label="Permalink to &quot;四、其他&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 列出所有磁盘及其分区的全部信息，包括每个磁盘的设备名称、分区大小、文件系统类型、分区的启动标记</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fdisk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> （主要查看分区大小、类型，判断分区和物理磁盘的关系，是否扩了分区）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fdisk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/sda</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Disk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 磁盘总大小</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Device</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 磁盘或分区的设备名称</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Boot</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 标记该分区是否为启动分区（</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">表示启动分区）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Start</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 分区起始扇区</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  End</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --分区的结束扇区</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Blocks</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --该分区的总块数</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --分区类型id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> System</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --分区文件类型</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看分区的文件系统（扩容时，如果没有xfs_growfs /dev/sda1扩展文件系统，磁盘不可用，可以查看文件系统大小）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">df</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -Th</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Filesystem</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">              Type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      Size</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  Used</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Avail</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Use%</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Mounted</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/dev/mapper/centos-root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xfs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       1.5T</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  1.3T</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  289G</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  82%</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /</span></span></code></pre></div>`,22),p=[h];function k(t,e,F,d,r,g){return a(),i("div",null,p)}const c=s(l,[["render",k]]);export{y as __pageData,c as default};
